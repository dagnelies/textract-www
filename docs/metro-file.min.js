!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function(jQuery){"use strict";var $=jQuery;$=jQuery;if(void 0===jQuery)throw new Error("Metro 4 requires jQuery!");if("MutationObserver"in window==!1)throw new Error("Metro 4 requires MutationObserver!");var meta_init=$("meta[name='metro4:init']").attr("content"),meta_locale=$("meta[name='metro4:locale']").attr("content"),meta_week_start=$("meta[name='metro4:week_start']").attr("content"),meta_date_format=$("meta[name='metro4:date_format']").attr("content"),meta_date_format_input=$("meta[name='metro4:date_format_input']").attr("content"),meta_animation_duration=$("meta[name='metro4:animation_duration']").attr("content"),meta_callback_timeout=$("meta[name='metro4:callback_timeout']").attr("content"),meta_timeout=$("meta[name='metro4:timeout']").attr("content"),meta_scroll_multiple=$("meta[name='metro4:scroll_multiple']").attr("content"),meta_cloak=$("meta[name='metro4:cloak']").attr("content"),meta_cloak_duration=$("meta[name='metro4:cloak_duration']").attr("content");void 0===window.METRO_INIT&&(window.METRO_INIT=void 0===meta_init||JSON.parse(meta_init)),void 0===window.METRO_DEBUG&&(window.METRO_DEBUG=!0),void 0===window.METRO_WEEK_START&&(window.METRO_WEEK_START=void 0!==meta_week_start?parseInt(meta_week_start):0),void 0===window.METRO_DATE_FORMAT&&(window.METRO_DATE_FORMAT=void 0!==meta_date_format?meta_date_format:"%Y-%m-%d"),void 0===window.METRO_DATE_FORMAT_INPUT&&(window.METRO_DATE_FORMAT_INPUT=void 0!==meta_date_format_input?meta_date_format_input:"%Y-%m-%d"),void 0===window.METRO_LOCALE&&(window.METRO_LOCALE=void 0!==meta_locale?meta_locale:"en-US"),void 0===window.METRO_ANIMATION_DURATION&&(window.METRO_ANIMATION_DURATION=void 0!==meta_animation_duration?parseInt(meta_animation_duration):300),void 0===window.METRO_CALLBACK_TIMEOUT&&(window.METRO_CALLBACK_TIMEOUT=void 0!==meta_callback_timeout?parseInt(meta_callback_timeout):500),void 0===window.METRO_TIMEOUT&&(window.METRO_TIMEOUT=void 0!==meta_timeout?parseInt(meta_timeout):2e3),void 0===window.METRO_SCROLL_MULTIPLE&&(window.METRO_SCROLL_MULTIPLE=void 0!==meta_scroll_multiple?parseInt(meta_scroll_multiple):20),void 0===window.METRO_CLOAK_REMOVE&&(window.METRO_CLOAK_REMOVE=void 0!==meta_cloak?(""+meta_cloak).toLowerCase():"fade"),void 0===window.METRO_CLOAK_DURATION&&(window.METRO_CLOAK_DURATION=void 0!==meta_cloak_duration?parseInt(meta_cloak_duration):500),void 0===window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE&&(window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE=!0),void 0===window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS&&(window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS=!0),void 0===window.METRO_HOTKEYS_FILTER_TEXT_INPUTS&&(window.METRO_HOTKEYS_FILTER_TEXT_INPUTS=!0),void 0===window.METRO_HOTKEYS_BUBBLE_UP&&(window.METRO_HOTKEYS_BUBBLE_UP=!1),void 0===window.METRO_THROWS&&(window.METRO_THROWS=!0),window.METRO_MEDIA=[],"function"!=typeof Object.create&&(Object.create=function(o){function F(){}return F.prototype=o,new F}),"function"!=typeof Object.values&&(Object.values=function(obj){return Object.keys(obj).map(function(e){return obj[e]})}),"function"!=typeof window.setImmediate&&(window.setImmediate=function(fn){return setTimeout(fn,0)});var isTouch="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints,Metro={version:"4.2.39",versionFull:"4.2.39.721 ",isTouchable:isTouch,fullScreenEnabled:document.fullscreenEnabled,sheet:null,controlsPosition:{INSIDE:"inside",OUTSIDE:"outside"},groupMode:{ONE:"one",MULTI:"multi"},aspectRatio:{HD:"hd",SD:"sd",CINEMA:"cinema"},fullScreenMode:{WINDOW:"window",DESKTOP:"desktop"},position:{TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",TOP_RIGHT:"top-right",TOP_LEFT:"top-left",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",LEFT_BOTTOM:"left-bottom",LEFT_TOP:"left-top",RIGHT_TOP:"right-top",RIGHT_BOTTOM:"right-bottom"},popoverEvents:{CLICK:"click",HOVER:"hover",FOCUS:"focus"},stepperView:{SQUARE:"square",CYCLE:"cycle",DIAMOND:"diamond"},listView:{LIST:"list",CONTENT:"content",ICONS:"icons",ICONS_MEDIUM:"icons-medium",ICONS_LARGE:"icons-large",TILES:"tiles",TABLE:"table"},events:{click:"click.metro",start:isTouch?"touchstart.metro":"mousedown.metro",stop:isTouch?"touchend.metro":"mouseup.metro",move:isTouch?"touchmove.metro":"mousemove.metro",enter:isTouch?"touchstart.metro":"mouseenter.metro",leave:"mouseleave.metro",focus:"focus.metro",blur:"blur.metro",resize:"resize.metro",keyup:"keyup.metro",keydown:"keydown.metro",keypress:"keypress.metro",dblclick:"dblclick.metro",input:"input.metro",change:"change.metro",cut:"cut.metro",paste:"paste.metro",scroll:"scroll.metro",scrollStart:"scrollstart.metro",scrollStop:"scrollstop.metro",mousewheel:"mousewheel.metro",inputchange:"change.metro input.metro propertychange.metro cut.metro paste.metro copy.metro",dragstart:"dragstart.metro",dragend:"dragend.metro",dragenter:"dragenter.metro",dragover:"dragover.metro",dragleave:"dragleave.metro",drop:"drop.metro",drag:"drag.metro"},keyCode:{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,BREAK:19,CAPS:20,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,COMMA:188},media_queries:{FS:"(min-width: 0px)",XS:"(min-width: 360px)",SM:"(min-width: 576px)",MD:"(min-width: 768px)",LG:"(min-width: 992px)",XL:"(min-width: 1200px)",XXL:"(min-width: 1452px)"},media_sizes:{FS:0,XS:360,SM:576,LD:640,MD:768,LG:992,XL:1200,XXL:1452},media_mode:{FS:"fs",XS:"xs",SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},media_modes:["fs","xs","sm","md","lg","xl","xxl"],actions:{REMOVE:1,HIDE:2},hotkeys:[],about:function(f){console.log("Metro 4 - v"+(!0===f?this.versionFull:this.version))},aboutDlg:function(f){alert("Metro 4 - v"+(!0===f?this.versionFull:this.version))},ver:function(f){return!0===f?this.versionFull:this.version},observe:function(){new MutationObserver(function(mutations){mutations.map(function(mutation){if("attributes"===mutation.type&&"data-role"!==mutation.attributeName){var element=$(mutation.target),mc=element.data("metroComponent");void 0!==mc&&$.each(mc,function(){var plug=element.data(this);plug&&plug.changeAttribute(mutation.attributeName)})}else if("childList"===mutation.type&&0<mutation.addedNodes.length){var i,obj,widgets={},plugins={},nodes=mutation.addedNodes;for(i=0;i<nodes.length;i++){var node=mutation.addedNodes[i];"SCRIPT"!==node.tagName&&"STYLE"!==node.tagName&&(plugins=(obj=$(mutation.addedNodes[i])).find("[data-role]"),(widgets=void 0!==obj.data("role")?$.merge(plugins,obj):plugins).length&&Metro.initWidgets(widgets))}}})}).observe($("html")[0],{childList:!0,attributes:!0,subtree:!0})},init:function(){var widgets=$("[data-role]"),hotkeys=$("[data-hotkey]"),html=$("html");return!0===isTouch?html.addClass("metro-touch-device"):html.addClass("metro-no-touch-device"),this.sheet=Utils.newCssSheet(),window.METRO_MEDIA=[],$.each(Metro.media_queries,function(key,query){Utils.media(query)&&METRO_MEDIA.push(Metro.media_mode[key])}),this.observe(),this.initHotkeys(hotkeys),this.initWidgets(widgets),this.about(!0),"fade"!==METRO_CLOAK_REMOVE?$(".m4-cloak").removeClass("m4-cloak"):$(".m4-cloak").animate({opacity:1},METRO_CLOAK_REMOVE,function(){$(".m4-cloak").removeClass("m4-cloak")}),this},initHotkeys:function(hotkeys){$.each(hotkeys,function(){var element=$(this),hotkey=!!element.data("hotkey")&&element.data("hotkey").toLowerCase();!1!==hotkey&&!0!==element.data("hotKeyBonded")&&(Metro.hotkeys.push(hotkey),$(document).on(Metro.events.keyup,null,hotkey,function(e){if(void 0!==element)return"A"===element[0].tagName&&void 0!==element.attr("href")&&""!==element.attr("href").trim()&&"#"!==element.attr("href").trim()?document.location.href=element.attr("href"):element.click(),METRO_HOTKEYS_BUBBLE_UP}),element.data("hotKeyBonded",!0))})},initWidgets:function(widgets){$.each(widgets,function(){var $this=$(this);$this.data("role").split(/\s*,\s*/).map(function(func){if(void 0!==$.fn[func]&&void 0===$this.attr("data-role-"+func)){$.fn[func].call($this),$this.attr("data-role-"+func,!0);var mc=$this.data("metroComponent");void 0===mc?mc=[func]:mc.push(func),$this.data("metroComponent",mc)}})})},plugin:function(name,object){$.fn[name]=function(options){return this.each(function(){$.data(this,name,Object.create(object).init(options,this))})}},destroyPlugin:function(element,name){var p,mc;if(element=Utils.isJQueryObject(element)?element[0]:element,p=$(element).data(name),!Utils.isValue(p))throw new Error("Component can not be destroyed: the element is not a Metro 4 component.");if(!Utils.isFunc(p.destroy))throw new Error("Component can not be destroyed: method destroy not found.");p.destroy(),mc=$(element).data("metroComponent"),Utils.arrayDelete(mc,name),$(element).data("metroComponent",mc),$.removeData(element,name),$(element).removeAttr("data-role-"+name)},destroyPluginAll:function(element){element=Utils.isJQueryObject(element)?element[0]:element;var mc=$(element).data("metroComponent");void 0!==mc&&0<mc.length&&$.each(mc,function(){Metro.destroyPlugin(element,this)})},initPlugin:function(element,name){element=$(element);try{if(void 0!==$.fn[name]&&void 0===element.attr("data-role-"+name)){$.fn[name].call(element),element.attr("data-role-"+name,!0);var mc=element.data("metroComponent");void 0===mc?mc=[name]:mc.push(name),element.data("metroComponent",mc)}}catch(e){console.log(e.message,e.stack)}},reinitPlugin:function(element,name){this.destroyPlugin(element,name),this.initPlugin(element,name)},reinitPluginAll:function(element){var mc=$(element).data("metroComponent");void 0!==mc&&0<mc.length&&$.each(mc,function(){Metro.reinitPlugin(element,this)})},noop:function(){},noop_true:function(){return!0},noop_false:function(){return!1},stop:function(e){e.stopPropagation(),e.preventDefault()},requestFullScreen:function(element){element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullScreen?element.webkitRequestFullScreen():element.msRequestFullscreen?element.msRequestFullscreen():element.requestFullscreen()},exitFullScreen:function(){document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.exitFullscreen()},inFullScreen:function(){return void 0!==(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}};window.Metro=Metro,$(window).on(Metro.events.resize,function(){window.METRO_MEDIA=[],$.each(Metro.media_queries,function(key,query){Utils.media(query)&&METRO_MEDIA.push(Metro.media_mode[key])})}),$.fn.extend({toggleAttr:function(a,v){return this.each(function(){var el=$(this);void 0!==v?el.attr(a,v):void 0!==el.attr(a)?el.removeAttr(a):el.attr(a,""+a)})},clearClasses:function(){return this.each(function(){this.className=""})},fire:function(eventName,data){return this.each(function(){var e=jQuery.Event(eventName);e.detail=data,$(this).trigger(e)})}}),Array.prototype.shuffle=function(){for(var temporaryValue,randomIndex,currentIndex=this.length;0!==currentIndex;)randomIndex=Math.floor(Math.random()*currentIndex),temporaryValue=this[currentIndex-=1],this[currentIndex]=this[randomIndex],this[randomIndex]=temporaryValue;return this},Array.prototype.clone=function(){return this.slice(0)},Array.prototype.unique=function(){for(var a=this.concat(),i=0;i<a.length;++i)for(var j=i+1;j<a.length;++j)a[i]===a[j]&&a.splice(j--,1);return a},Array.from||(Array.from=function(val){var i,a=[];if(void 0===val.length&&"object"==typeof val)return Object.values(val);if(void 0===val.length)throw new Error("Value can not be converted to array");for(i=0;i<val.length;i++)a.push(val[i]);return a}),"function"!=typeof Array.contains&&(Array.prototype.contains=function(val,from){return-1<this.indexOf(val,from)}),Number.prototype.format=function(n,x,s,c){var re="\\d(?=(\\d{"+(x||3)+"})+"+(0<n?"\\D":"$")+")",num=this.toFixed(Math.max(0,~~n));return(c?num.replace(".",c):num).replace(new RegExp(re,"g"),"$&"+(s||","))},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.contains=function(){return!!~String.prototype.indexOf.apply(this,arguments)},String.prototype.toDate=function(format,locale){var normalized,formatItems,dateItems,monthIndex,dayIndex,yearIndex,hourIndex,minutesIndex,secondsIndex,year,month,day,hour,minute,second,parsedMonth;locale=locale||"en-US";if(null==format||""===format)return new Date(this);if(normalized=this.replace(/[\/,.:\s]/g,"-"),formatItems=format.toLowerCase().replace(/[^a-zA-Z0-9%]/g,"-").split("-"),dateItems=normalized.split("-"),""===normalized.replace(/\-/g,"").trim())return"Invalid Date";if(monthIndex=-1<formatItems.indexOf("mm")?formatItems.indexOf("mm"):formatItems.indexOf("%m"),dayIndex=-1<formatItems.indexOf("dd")?formatItems.indexOf("dd"):formatItems.indexOf("%d"),yearIndex=-1<formatItems.indexOf("yyyy")?formatItems.indexOf("yyyy"):-1<formatItems.indexOf("yy")?formatItems.indexOf("yy"):formatItems.indexOf("%y"),hourIndex=-1<formatItems.indexOf("hh")?formatItems.indexOf("hh"):formatItems.indexOf("%h"),minutesIndex=-1<formatItems.indexOf("ii")?formatItems.indexOf("ii"):-1<formatItems.indexOf("mi")?formatItems.indexOf("mi"):formatItems.indexOf("%i"),secondsIndex=-1<formatItems.indexOf("ss")?formatItems.indexOf("ss"):formatItems.indexOf("%s"),!(-1<monthIndex&&""!==dateItems[monthIndex]))return"Invalid Date";if(isNaN(parseInt(dateItems[monthIndex]))){if(dateItems[monthIndex]=function(month){var d,months,index,i;if(month=month.substr(0,3),void 0!==locale&&"en-US"!==locale&&void 0!==Locales&&void 0!==Locales[locale]&&void 0!==Locales[locale].calendar&&void 0!==Locales[locale].calendar.months){for(months=Locales[locale].calendar.months,i=12;i<months.length;i++)if(months[i].toLowerCase()===month.toLowerCase()){index=i-12;break}month=Locales["en-US"].calendar.months[index]}return d=Date.parse(month+" 1, 1972"),isNaN(d)?-1:new Date(d).getMonth()+1}(dateItems[monthIndex]),-1===dateItems[monthIndex])return"Invalid Date"}else if((parsedMonth=parseInt(dateItems[monthIndex]))<1||12<parsedMonth)return"Invalid Date";return year=-1<yearIndex&&""!==dateItems[yearIndex]?dateItems[yearIndex]:null,month=-1<monthIndex&&""!==dateItems[monthIndex]?dateItems[monthIndex]:null,day=-1<dayIndex&&""!==dateItems[dayIndex]?dateItems[dayIndex]:null,hour=-1<hourIndex&&""!==dateItems[hourIndex]?dateItems[hourIndex]:null,minute=-1<minutesIndex&&""!==dateItems[minutesIndex]?dateItems[minutesIndex]:null,second=-1<secondsIndex&&""!==dateItems[secondsIndex]?dateItems[secondsIndex]:null,new Date(year,month-1,day,hour,minute,second)},String.prototype.toArray=function(delimiter,type,format){return type=type||"string",format=null!=format&&format,(""+this).split(delimiter=delimiter||",").map(function(s){var result;switch(type){case"int":case"integer":result=parseInt(s);break;case"number":case"float":result=parseFloat(s);break;case"date":result=format?s.toDate(format):new Date(s);break;default:result=s.trim()}return result})},Date.prototype.getWeek=function(dowOffset){var nday,newYear,day,daynum,weeknum;return dowOffset=Utils.isValue(dowOffset)?"number"==typeof dowOffset?parseInt(dowOffset):0:METRO_WEEK_START,day=0<=(day=(newYear=new Date(this.getFullYear(),0,1)).getDay()-dowOffset)?day:day+7,daynum=Math.floor((this.getTime()-newYear.getTime()-6e4*(this.getTimezoneOffset()-newYear.getTimezoneOffset()))/864e5)+1,day<4?52<(weeknum=Math.floor((daynum+day-1)/7)+1)&&(weeknum=(nday=0<=(nday=new Date(this.getFullYear()+1,0,1).getDay()-dowOffset)?nday:nday+7)<4?1:53):weeknum=Math.floor((daynum+day-1)/7),weeknum},Date.prototype.getYear=function(){return this.getFullYear().toString().substr(-2)},Date.prototype.format=function(format,locale){void 0===locale&&(locale="en-US");var cal=(void 0!==Metro.locales&&void 0!==Metro.locales[locale]?Metro.locales[locale]:Metro.locales["en-US"]).calendar,date=this,nDay=date.getDay(),nDate=date.getDate(),nMonth=date.getMonth(),nYear=date.getFullYear(),nHour=date.getHours(),aDays=cal.days,aMonths=cal.months,aDayCount=[0,31,59,90,120,151,181,212,243,273,304,334],getThursday=function(){var target=new Date(date);return target.setDate(nDate-(nDay+6)%7+3),target},zeroPad=function(nNum,nPad){return(""+(Math.pow(10,nPad)+nNum)).slice(1)};return format.replace(/(%[a-z])/gi,function(sMatch){return{"%a":aDays[nDay].slice(0,3),"%A":aDays[nDay],"%b":aMonths[nMonth].slice(0,3),"%B":aMonths[nMonth],"%c":date.toUTCString(),"%C":Math.floor(nYear/100),"%d":zeroPad(nDate,2),dd:zeroPad(nDate,2),"%e":nDate,"%F":date.toISOString().slice(0,10),"%G":getThursday().getFullYear(),"%g":(""+getThursday().getFullYear()).slice(2),"%H":zeroPad(nHour,2),"%I":zeroPad((nHour+11)%12+1,2),"%j":zeroPad(aDayCount[nMonth]+nDate+(1<nMonth&&(nYear%4==0&&nYear%100!=0||nYear%400==0)?1:0),3),"%k":""+nHour,"%l":(nHour+11)%12+1,"%m":zeroPad(nMonth+1,2),"%M":zeroPad(date.getMinutes(),2),"%p":nHour<12?"AM":"PM","%P":nHour<12?"am":"pm","%s":Math.round(date.getTime()/1e3),"%S":zeroPad(date.getSeconds(),2),"%u":nDay||7,"%V":function(){var target=getThursday(),n1stThu=target.valueOf();target.setMonth(0,1);var nJan1=target.getDay();return 4!==nJan1&&target.setMonth(0,1+(4-nJan1+7)%7),zeroPad(1+Math.ceil((n1stThu-target)/6048e5),2)}(),"%w":""+nDay,"%x":date.toLocaleDateString(),"%X":date.toLocaleTimeString(),"%y":(""+nYear).slice(2),"%Y":nYear,"%z":date.toTimeString().replace(/.+GMT([+-]\d+).+/,"$1"),"%Z":date.toTimeString().replace(/.+\((.+?)\)$/,"$1")}[sMatch]||sMatch})},Date.prototype.addHours=function(n){return this.setTime(this.getTime()+60*n*60*1e3),this},Date.prototype.addDays=function(n){return this.setDate(this.getDate()+n),this},Date.prototype.addMonths=function(n){return this.setMonth(this.getMonth()+n),this},Date.prototype.addYears=function(n){return this.setFullYear(this.getFullYear()+n),this};var Utils={isUrl:function(val){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@\-\/]))?/.test(val)},isTag:function(val){return/^<\/?[\w\s="/.':;#-\/\?]+>/gi.test(val)},isColor:function(val){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(val)},isEmbedObject:function(val){var result=!1;return $.each(["iframe","object","embed","video"],function(i,v){"string"==typeof val&&val.toLowerCase()===v?result=!0:void 0!==val.nodeType&&val.tagName.toLowerCase()===v&&(result=!0)}),result},isVideoUrl:function(val){return/youtu\.be|youtube|vimeo/gi.test(val)},isDate:function(val,format){return!("object"!=typeof val||!Utils.isFunc(val.getMonth))||"Invalid Date"!==(Utils.isValue(format)?String(val).toDate(format):String(new Date(val)))},isDateObject:function(v){return"object"==typeof v&&void 0!==v.getMonth},isInt:function(n){return Number(n)===n&&n%1==0},isFloat:function(n){return Number(n)===n&&n%1!=0},isTouchDevice:function(){return"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints},isFunc:function(f){return Utils.isType(f,"function")},isObject:function(o){return Utils.isType(o,"object")},isArray:function(a){return Array.isArray(a)},isType:function(o,t){if(null==o)return!1;if(typeof o===t)return o;if(Utils.isTag(o)||Utils.isUrl(o))return!1;if(typeof window[o]===t)return window[o];if("string"==typeof o&&-1===o.indexOf("."))return!1;if("string"==typeof o&&-1!==o.indexOf(" "))return!1;if("string"==typeof o&&-1!==o.indexOf("("))return!1;if("string"==typeof o&&-1!==o.indexOf("["))return!1;if("number"==typeof o&&"number"!==t.toLowerCase())return!1;var i,ns=o.split("."),context=window;for(i=0;i<ns.length;i++)context=context[ns[i]];return typeof context===t&&context},isMetroObject:function(el,type){var $el=$(el),el_obj=$el.data(type);return 0===$el.length?(console.log(type+" "+el+" not found!"),!1):void 0!==el_obj||(console.log("Element not contain role "+type+'! Please add attribute data-role="'+type+'" to element '+el),!1)},isJQueryObject:function(el){return"function"==typeof jQuery&&el instanceof jQuery},embedObject:function(val){return"string"!=typeof val&&(val=Utils.isJQueryObject(val)?val.html():val.innerHTML),"<div class='embed-container'>"+val+"</div>"},embedUrl:function(val){return-1!==val.indexOf("youtu.be")&&(val="https://www.youtube.com/embed/"+val.split("/").pop()),"<div class='embed-container'><iframe src='"+val+"'></iframe></div>"},secondsToTime:function(secs){var divisor_for_minutes=secs%3600,divisor_for_seconds=divisor_for_minutes%60;return{h:Math.floor(secs/3600),m:Math.floor(divisor_for_minutes/60),s:Math.ceil(divisor_for_seconds)}},hex2rgba:function(hex,alpha){var c;if(alpha=isNaN(alpha)?1:alpha,/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex))return 3===(c=hex.substring(1).split("")).length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),"rgba("+[(c="0x"+c.join(""))>>16&255,c>>8&255,255&c].join(",")+","+alpha+")";throw new Error("Hex2rgba error. Bad Hex value")},random:function(from,to){return Math.floor(Math.random()*(to-from+1)+from)},uniqueId:function(){var d=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===c?r:3&r|8).toString(16)})},elementId:function(prefix){return prefix+"-"+(new Date).getTime()+Utils.random(1,1e3)},secondsToFormattedString:function(time){var sec_num=parseInt(time,10),hours=Math.floor(sec_num/3600),minutes=Math.floor((sec_num-3600*hours)/60),seconds=sec_num-3600*hours-60*minutes;return hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),seconds<10&&(seconds="0"+seconds),[hours,minutes,seconds].join(":")},callback:function(f,args,context){return Utils.exec(f,args,context)},func:function(f){return new Function("a",f)},exec:function(f,args,context){var result;if(null==f)return!1;var func=Utils.isFunc(f);!1===func&&(func=Utils.func(f));try{result=func.apply(context,args)}catch(err){if(!(result=null)===METRO_THROWS)throw err}return result},isOutsider:function(el){var rect,clone=(el=Utils.isJQueryObject(el)?el:$(el)).clone();return clone.removeAttr("data-role").css({visibility:"hidden",position:"absolute",display:"block"}),el.parent().append(clone),rect=clone[0].getBoundingClientRect(),clone.remove(),0<=rect.top&&0<=rect.left&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},inViewport:function(el){var rect=Utils.rect(el);return 0<=rect.top&&0<=rect.left&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},rect:function(el){return"function"==typeof jQuery&&el instanceof jQuery&&(el=el[0]),el.getBoundingClientRect()},getCursorPosition:function(el,e){var a=Utils.rect(el);return{x:Utils.pageXY(e).x-a.left-window.pageXOffset,y:Utils.pageXY(e).y-a.top-window.pageYOffset}},getCursorPositionX:function(el,e){return Utils.getCursorPosition(el,e).x},getCursorPositionY:function(el,e){return Utils.getCursorPosition(el,e).y},objectLength:function(obj){return Object.keys(obj).length},percent:function(total,part,round_value){if(0===total)return 0;var result=100*part/total;return!0===round_value?Math.round(result):Math.round(100*result)/100},camelCase:function(str){return str.replace(/-([a-z])/g,function(g){return g[1].toUpperCase()})},dashedName:function(str){return str.replace(/([A-Z])/g,function(u){return"-"+u.toLowerCase()})},objectShift:function(obj){var min=0;return $.each(obj,function(i){0===min?min=i:i<min&&(min=i)}),delete obj[min],obj},objectDelete:function(obj,key){void 0!==obj[key]&&delete obj[key]},arrayDeleteByMultipleKeys:function(arr,keys){return keys.forEach(function(ind){delete arr[ind]}),arr.filter(function(item){return void 0!==item})},arrayDelete:function(arr,val){-1<arr.indexOf(val)&&arr.splice(arr.indexOf(val),1)},arrayDeleteByKey:function(arr,key){arr.splice(key,1)},nvl:function(data,other){return null==data?other:data},objectClone:function(obj){var copy={};for(var key in obj)obj.hasOwnProperty(key)&&(copy[key]=obj[key]);return copy},github:function(repo,callback){var that=this;$.ajax({url:"https://api.github.com/repos/"+repo,dataType:"jsonp"}).done(function(data){that.callback(callback,[data.data])})},detectIE:function(){var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE ");if(0<msie)return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10);if(0<ua.indexOf("Trident/")){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");return 0<edge&&parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)},detectChrome:function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},md5:function(s){return hex_md5(s)},encodeURI:function(str){return encodeURI(str).replace(/%5B/g,"[").replace(/%5D/g,"]")},pageHeight:function(){var body=document.body,html=document.documentElement;return Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight)},cleanPreCode:function(selector){Array.prototype.slice.call(document.querySelectorAll(selector),0).forEach(function(el){var txt=el.textContent.replace(/^[\r\n]+/,"").replace(/\s+$/g,"");if(/^\S/gm.test(txt))el.textContent=txt;else{for(var mat,str,len,re=/^[\t ]+/gm,min=1e3;mat=re.exec(txt);)(len=mat[0].length)<min&&(min=len,str=mat[0]);1e3!==min&&(el.textContent=txt.replace(new RegExp("^"+str,"gm"),""))}})},coords:function(el){Utils.isJQueryObject(el)&&(el=el[0]);var box=el.getBoundingClientRect();return{top:box.top+window.pageYOffset,left:box.left+window.pageXOffset}},positionXY:function(e,t){switch(t){case"client":return Utils.clientXY(e);case"screen":return Utils.screenXY(e);case"page":return Utils.pageXY(e);default:return{x:0,y:0}}},clientXY:function(e){return{x:e.changedTouches?e.changedTouches[0].clientX:e.clientX,y:e.changedTouches?e.changedTouches[0].clientY:e.clientY}},screenXY:function(e){return{x:e.changedTouches?e.changedTouches[0].screenX:e.screenX,y:e.changedTouches?e.changedTouches[0].screenY:e.screenY}},pageXY:function(e){return{x:e.changedTouches?e.changedTouches[0].pageX:e.pageX,y:e.changedTouches?e.changedTouches[0].pageY:e.pageY}},isRightMouse:function(e){return"which"in e?3===e.which:"button"in e?2===e.button:void 0},hiddenElementSize:function(el,includeMargin){var clone=$(el).clone();clone.removeAttr("data-role").css({visibility:"hidden",position:"absolute",display:"block"}),$("body").append(clone),void 0===includeMargin&&(includeMargin=!1);var width=clone.outerWidth(includeMargin),height=clone.outerHeight(includeMargin);return clone.remove(),{width:width,height:height}},getStyle:function(el,pseudo){return!0===Utils.isJQueryObject(el)&&(el=el[0]),window.getComputedStyle(el,pseudo)},getStyleOne:function(el,property){return Utils.getStyle(el).getPropertyValue(property)},getTransformMatrix:function(el,returnArray){var a=Utils.getStyleOne(el,"transform").replace("matrix(","").slice(0,-1).split(",");return!0!==returnArray?{a:a[0],b:a[1],c:a[2],d:a[3],tx:a[4],ty:a[5]}:a},computedRgbToHex:function(rgb){var i,a=rgb.replace(/[^\d,]/g,"").split(","),result="#";for(i=0;i<3;i++){var h=parseInt(a[i]).toString(16);result+=1===h.length?"0"+h:h}return result},computedRgbToRgba:function(rgb,alpha){var a=rgb.replace(/[^\d,]/g,"").split(",");return void 0===alpha&&(alpha=1),a.push(alpha),"rgba("+a.join(",")+")"},computedRgbToArray:function(rgb){return rgb.replace(/[^\d,]/g,"").split(",")},hexColorToArray:function(hex){var c;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)?(3===(c=hex.substring(1).split("")).length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),[(c="0x"+c.join(""))>>16&255,c>>8&255,255&c]):[0,0,0]},hexColorToRgbA:function(hex,alpha){var c;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)?(3===(c=hex.substring(1).split("")).length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),"rgba("+[(c="0x"+c.join(""))>>16&255,c>>8&255,255&c,alpha||1].join(",")+")"):"rgba(0,0,0,1)"},getInlineStyles:function(el){var styles={};Utils.isJQueryObject(el)&&(el=el[0]);for(var i=0,l=el.style.length;i<l;i++){var s=el.style[i];styles[s]=el.style[s]}return styles},updateURIParameter:function(uri,key,value){var re=new RegExp("([?&])"+key+"=.*?(&|$)","i"),separator=-1!==uri.indexOf("?")?"&":"?";return uri.match(re)?uri.replace(re,"$1"+key+"="+value+"$2"):uri+separator+key+"="+value},getURIParameter:function(url,name){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var results=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null},getLocales:function(){return Object.keys(Metro.locales)},addLocale:function(locale){Metro.locales=$.extend({},Metro.locales,locale)},strToArray:function(str,delimiter,type,format){return Utils.isValue(delimiter)||(delimiter=","),Utils.isValue(type)||(type="string"),(""+str).split(delimiter).map(function(s){var result;switch(type){case"int":case"integer":result=parseInt(s);break;case"number":case"float":result=parseFloat(s);break;case"date":result=Utils.isValue(format)?s.toDate(format):new Date(s);break;default:result=s.trim()}return result})},aspectRatioH:function(width,a){return"16/9"===a?9*width/16:"21/9"===a?9*width/21:"4/3"===a?3*width/4:void 0},aspectRatioW:function(height,a){return"16/9"===a?16*height/9:"21/9"===a?21*height/9:"4/3"===a?4*height/3:void 0},valueInObject:function(obj,value){return-1<Object.values(obj).indexOf(value)},keyInObject:function(obj,key){return-1<Object.keys(obj).indexOf(key)},inObject:function(obj,key,val){return void 0!==obj[key]&&obj[key]===val},newCssSheet:function(media){var style=document.createElement("style");return void 0!==media&&style.setAttribute("media",media),style.appendChild(document.createTextNode("")),document.head.appendChild(style),style.sheet},addCssRule:function(sheet,selector,rules,index){"insertRule"in sheet?sheet.insertRule(selector+"{"+rules+"}",index):"addRule"in sheet&&sheet.addRule(selector,rules,index)},media:function(query){return window.matchMedia(query).matches},mediaModes:function(){return METRO_MEDIA},mediaExist:function(media){return-1<METRO_MEDIA.indexOf(media)},inMedia:function(media){return-1<METRO_MEDIA.indexOf(media)&&METRO_MEDIA.indexOf(media)===METRO_MEDIA.length-1},isValue:function(val){return null!=val&&""!==val},isNull:function(val){return null==val},isNegative:function(val){return parseFloat(val)<0},isPositive:function(val){return 0<parseFloat(val)},isZero:function(val){return 0===parseFloat(val.toFixed(2))},between:function(val,bottom,top,equals){return!0===equals?bottom<=val&&val<=top:bottom<val&&val<top},parseMoney:function(val){return Number(parseFloat(val.replace(/[^0-9-.]/g,"")))},parseCard:function(val){return val.replace(/[^0-9]/g,"")},parsePhone:function(val){return Utils.parseCard(val)},isVisible:function(el){return Utils.isJQueryObject(el)&&(el=el[0]),"none"!==Utils.getStyleOne(el,"display")&&"hidden"!==Utils.getStyleOne(el,"visibility")&&null!==el.offsetParent},parseNumber:function(val,thousand,decimal){return val.replace(new RegExp("\\"+thousand,"g"),"").replace(new RegExp("\\"+decimal,"g"),".")},nearest:function(val,precision,down){return val/=precision,val=Math[!0===down?"floor":"ceil"](val)*precision},bool:function(value){switch(value){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}},copy:function(el){var range,sel,body=document.body;if(Utils.isJQueryObject(el)&&(el=el[0]),document.createRange&&window.getSelection){range=document.createRange(),(sel=window.getSelection()).removeAllRanges();try{range.selectNodeContents(el),sel.addRange(range)}catch(e){range.selectNode(el),sel.addRange(range)}}else body.createTextRange&&((range=body.createTextRange()).moveToElementText(el),range.select());document.execCommand("Copy"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},isLocalhost:function(){return"localhost"===location.hostname||"127.0.0.1"===location.hostname||""===location.hostname},formData:function(form){if(!Utils.isNull(form)&&(Utils.isJQueryObject(form)&&(form=form[0]),form&&"FORM"===form.nodeName)){var i,j,q={};for(i=form.elements.length-1;0<=i;i-=1)if(""!==form.elements[i].name)switch(form.elements[i].nodeName){case"INPUT":switch(form.elements[i].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":q[form.elements[i].name]=form.elements[i].value;break;case"checkbox":case"radio":form.elements[i].checked&&(q[form.elements[i].name]=form.elements[i].value)}break;case"file":break;case"TEXTAREA":q[form.elements[i].name]=form.elements[i].value;break;case"SELECT":switch(form.elements[i].type){case"select-one":q[form.elements[i].name]=form.elements[i].value;break;case"select-multiple":for(q[form.elements[i].name]=[],j=form.elements[i].options.length-1;0<=j;j-=1)form.elements[i].options[j].selected&&q[form.elements[i].name].push(form.elements[i].options[j].value)}break;case"BUTTON":switch(form.elements[i].type){case"reset":case"submit":case"button":q[form.elements[i].name]=form.elements[i].value}}return q}}};Metro.utils=Utils;var File={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this._setOptionsFromDOM(),this._create(),Utils.exec(this.options.onFileCreate,[this.element],elem),this},options:{mode:"input",buttonTitle:"Choose file(s)",filesTitle:"file(s) selected",dropTitle:"<strong>Choose a file</strong> or drop it here",dropIcon:"<span class='default-icon-upload'></span>",prepend:"",clsComponent:"",clsPrepend:"",clsButton:"",clsCaption:"",copyInlineStyles:!0,onSelect:Metro.noop,onFileCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){this._createStructure(),this._createEvents()},_createStructure:function(){var icon,button,element=this.element,o=this.options,container=$("<label>").addClass(("input"===o.mode?" file ":" drop-zone ")+element[0].className).addClass(o.clsComponent),caption=$("<span>").addClass("caption").addClass(o.clsCaption),files=$("<span>").addClass("files").addClass(o.clsCaption);(container.insertBefore(element),element.appendTo(container),"input"===o.mode)?(caption.insertBefore(element),(button=$("<button>").addClass("button").attr("tabindex",-1).attr("type","button").html(o.buttonTitle)).appendTo(container),button.addClass(o.clsButton),"rtl"===element.attr("dir")&&container.addClass("rtl"),""!==o.prepend&&$("<div>").html(o.prepend).addClass("prepend").addClass(o.clsPrepend).appendTo(container)):(icon=$(o.dropIcon).addClass("icon").appendTo(container),caption.html(o.dropTitle).insertAfter(icon),files.html("0 "+o.filesTitle).insertAfter(caption));if(!(element[0].className="")===o.copyInlineStyles)for(var i=0,l=element[0].style.length;i<l;i++)container.css(element[0].style[i],element.css(element[0].style[i]));element.is(":disabled")?this.disable():this.enable()},_createEvents:function(){var element=this.element,o=this.options,container=element.closest("label"),caption=container.find(".caption"),files=container.find(".files");container.on(Metro.events.click,"button",function(){element.trigger("click")}),element.on(Metro.events.change,function(){var entry,file_names=[];0!==this.files.length&&(Array.from(this.files).forEach(function(file){file_names.push(file.name)}),"input"===o.mode?(entry=file_names.join(", "),caption.html(entry),caption.attr("title",entry)):files.html(element[0].files.length+" "+o.filesTitle),Utils.exec(o.onSelect,[this.files,element],element[0]))}),element.on(Metro.events.focus,function(){container.addClass("focused")}),element.on(Metro.events.blur,function(){container.removeClass("focused")}),"input"!==o.mode&&(container.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault()}),container.on("dragenter dragover",function(){container.addClass("drop-on")}),container.on("dragleave",function(){container.removeClass("drop-on")}),container.on("drop",function(e){element[0].files=e.originalEvent.dataTransfer.files,files.html(element[0].files.length+" "+o.filesTitle),container.removeClass("drop-on"),Utils.detectChrome()||Utils.exec(o.onSelect,[element[0].files,element],element[0])}))},disable:function(){this.element.data("disabled",!0),this.element.parent().addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.parent().removeClass("disabled")},toggleState:function(){this.elem.disabled?this.disable():this.enable()},toggleDir:function(){"rtl"===this.element.attr("dir")?this.element.parent().addClass("rtl"):this.element.parent().removeClass("rtl")},changeAttribute:function(attributeName){switch(attributeName){case"disabled":this.toggleState();break;case"dir":this.toggleDir()}},destroy:function(){var element=this.element,parent=element.parent();element.off(Metro.events.change),parent.off(Metro.events.click,"button"),element.insertBefore(parent),parent.remove()}};return Metro.plugin("file",File),!0===METRO_INIT?Metro.init():Metro});